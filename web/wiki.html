<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lang Bot</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<h1>Lang Bot</h1>

<h2>Enter a language name:</h2>

<form id="lang_form">
    <div class="input-group">
        <label for="lang">Language: </label>
        <input id="lang" name="lang" type="text"/>
    </div>
    <button type="submit" value="lang" class="submit">Submit</button>
</form>
<h2>Select a language family: </h2>
<pre id="lang_response"></pre>
<form id="family_form">
    <div class="input-group">
        <label for="family">Family: </label>
        <select id="family" name="family">
            <option disabled selected>--Select a Language Family--</option>
            <option value="Afro-Asiatic">Afro-Asiatic</option>
            <option value="Austroasiatic">Austroasiatic</option>
            <option value="Austronesian">Austronesian</option>
            <option value="Dravidian">Dravidian</option>
            <option value="Indo-European">Indo-European</option>
            <option value="Japonic">Japonic</option>
            <option value="Koreanic">Koreanic</option>
            <option value="Kra-Dai">Kra-Dai</option>
            <option value="Niger-Congo">Niger-Congo</option>
            <option value="Sino-Tibetan">Sino-Tibetan</option>
            <option value="Turkic">Turkic</option>
        </select>
    </div>
    <button type="submit" value="family">Submit</button>
</form>
<h2>Family Entry: </h2>
<pre id="family_response"></pre>
<h2>Script Entry: </h2>
<form id="script_form">
    <div class="input-group">
        <label for="script">Script: </label>
        <select id="script" name="script">
            <option disabled selected>--Select a Script--</option>
            <option value="Arabic">Arabic</option>
            <option value="Baybayin">Baybayin</option>
            <option value="Bengali">Bengali</option>
            <option value="Chinese">Chinese</option>
            <option value="Cyrillic">Cyrillic</option>
            <option value="Devanagari">Devanagari</option>
            <option value="Gujarati">Gujarati</option>
            <option value="Hangul">Hangul</option>
            <option value="Kana">Kana</option>
            <option value="Kannada">Kannada</option>
            <option value="Latin">Latin</option>
            <option value="Saba">Saba</option>
            <option value="Syriac">Syriac</option>
            <option value="Tamil">Tamil</option>
            <option value="Telugu">Telugu</option>
            <option value="Thai">Thai</option>

        </select>
    </div>
    <button type="submit" value="script">Submit</button>
</form>
<pre id="script_response"></pre>
<script>
   function attachFormHandler(formId, fieldName, endpoint, outputId) {
    const form = document.getElementById(formId);

    form.addEventListener("submit", async function(event) {
        event.preventDefault();

        const data = new FormData(form);
        const value = data.get(fieldName);

        try {
            const response = await fetch(`http://localhost:5000/${endpoint}?${fieldName}=${encodeURIComponent(value)}`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            const myJson = await response.json();
            document.getElementById(outputId).textContent = JSON.stringify(myJson, null, 2);
        } catch (err) {
            document.getElementById(outputId).textContent = "Error: " + err;
        }
    });
}

    attachFormHandler("lang_form", "lang", "/search_lang", "lang_response")
    attachFormHandler("family_form", "family", "/search_family", "family_response")
    attachFormHandler("script_form", "script", "/search_script", "script_response")
</script>
</body>
</html>